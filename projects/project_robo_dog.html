<!DOCTYPE HTML>
<!--
	Verti by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Title</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
		<script src="https://kit.fontawesome.com/5c4820bc1c.js" crossorigin="anonymous"></script>
	</head>
	<body class="is-preload no-sidebar">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header-wrapper">
					<header id="header" class="container">

						<!-- Logo -->
							<div id="logo">
								<h1><a href="../index.html">Jan-Erik</a></h1>
								
							</div>

						<!-- Nav -->
							<nav id="nav">
								<ul>
									<li><a href="../index.html">Welcome</a></li>
									<li class="current"><a href="projects.html">Projects</a></li>
									<li><a href="../about_myself.html">About Myself</a></li>
								</ul>
							</nav>

					</header>
				</div>

			<!-- Main -->
				<div id="main-wrapper">
					<div class="container">
						<div id="content">

							<!-- Content -->
								<article>
									<div class="title_pic" style="text-align: center;">
										<img class="image_in_text" style="object-position: 50% 10%;"src="../images/robo_dog/ai_dog.png"></img>
									</div>
									<h2>Robotic Dog</h2>
									<h3>The idea</h3>
									<p>
										Dogs are a person’s best friend. 
										Imagine having one that helps you like a true companion on every DIY project—handing you tools or fetching the parts you need. 
										<br>Of course, for animal welfare reasons, it wouldn’t be a real dog, but a robotic one.
										<div style="text-align: center;">
											<img class="image_in_text" src="../images/robo_dog/ai_dog.png"></img>
										</div>
									</p>
									<h4>Functionality</h4>
									<p>
										The robotic dog should be able to follow its owner autonomously and carry parts or tools in a tray on its back.
									</p>
									<h4>Realistic Prototype</h4>
									<p>
										Since strong servos are quite expensive, the prototype was scaled down.
										The prototype should consist of 3D-printed body parts and 4 legs with 2 degrees of freedom each, driven by servos.
										The tray on the back should be able to carry small parts and should be detachable.
									</p>
									</p>
									<h4>3D-Models</h4>
									<p>
										The basis for the robotic dog are 3D models from John Bradnam on <a href="https://www.hackster.io/john-bradnam/robot-dog-boston-cbc763" target="_blank">www.hackster.io</a>. 
										Some changes were nessesary to fit the components which should be used and to make the carrying function possible.
									</p>
									<h4>Control</h4>
									<p>
										Even so John Bradnam already provided code for walking gaits, all code was developed from scratch.
										The control components differ from the original design, too. <br>
										The robotic dog is controlled by an ESP32 and the MG90S servos are controlled via a PCA9685 servo driver board. <br>
										Following the owner is realized with the help of two RXB6 recievers which locate a 433 MHz transmitter held by the owner.
									</p>
									<h3>Walking Gait</h3>
									<p>
										The first version of the robotic dog has no interial measurement unit (IMU) and therefore no feedback control. Hence the walking gait had to be very stable and is only based on time. <br>
										Therefore, a walking gait was developed where the robot always has three legs on the ground. <br>
										The walking gait is based on four phases. In each phase, one leg is lifted, moved forward and set down again, while the other three legs provide stability. <br>
										The following pattern is used:
										<ol>
											<li>left front leg</li>
											<li>right rear leg</li>
											<li>right front leg</li>
											<li>left rear leg</li>
										</ol>
										There maybe will be more complex and faster walking gaits in future versions.
									</p>
									<h4>Inverse kinematic</h4>
									<p>
										For a smooth walking gait, the servo angles have to be calculated depending on the desired foot position. <br>
										Therefore, an inverse kinematic for the legs was developed. Each leg has two degrees of freedom, which are controlled by two servos. <br>
										The following figure shows the a model of one leg:
										<div style="text-align: center;">
											<img class="image_in_text" src="../images/robo_dog/leg_ik.png"></img>		
										</div>
										The distance between hip and foot kann be calculated with the Pythagorean theorem:
										<div style="text-align: center;">
											<math xmlns="http://www.w3.org/1998/Math/MathML">
												<mi>d</mi>
												<mo>=</mo>
												<msqrt>
													<mrow>
													<msup>
														<mi>X</mi>
														<mn>2</mn>
													</msup>
													<mo>+</mo>
													<msup>
														<mi>Y</mi>
														<mn>2</mn>
													</msup>
													</mrow>
												</msqrt>
											</math>
										</div>
									If X and Y are the coordinates of the foot with respect to the hip, d is the distance between hip and foot. <br>
									With the cosine law, the angles of the servos can be calculated:
									<div style="text-align: center;">
										<math xmlns="http://www.w3.org/1998/Math/MathML">
											<msup><mi>d</mi><mn>2</mn></msup>
											<mo>=</mo>
											<msup>
												<msub>
													<mi>L</mi>
													<mi>tight</mi>  
												</msub>
												<mn>2</mn>
											</msup>
											<mo>+</mo>
											<msup>
												<msub>
													<mi>L</mi>
													<mi>lower leg</mi>  
												</msub>
												<mn>2</mn>
											</msup>
											<mo>-</mo>
											<mn>2</mn>
											<mo>&#x2062;</mo> <!-- unsichtbares Multiplikationszeichen -->
											<msub>
												<mi>L</mi>
												<mi>tight</mi>  
											</msub>
											<mo>&#x2062;</mo>
											<msub>
												<mi>L</mi>
												<mi>lower leg</mi>  
											</msub>
											<mo>&#x2062;</mo>
											<mi>cos</mi>
											<mo>(</mo>
											<msub>
												<mi>&#945;</mi>
												<mi>knee</mi>  
											</msub>
											<mo>)</mo>
										</math>
										<br>
										<math xmlns="http://www.w3.org/1998/Math/MathML">
											<msub>
												<mi>&#945;</mi>
												<mi>knee</mi>
											</msub>
											<mo>=</mo>
											<mi>arccos</mi>
											<mo>(</mo>
												<mfrac>
												<mrow>
													<msup><msub><mi>L</mi><mi>tight</mi></msub><mn>2</mn></msup>
													<mo>+</mo>
													<msup><msub><mi>L</mi><mi>lowerleg</mi></msub><mn>2</mn></msup>
													<mo>-</mo>
													<msup><mi>d</mi><mn>2</mn></msup>
												</mrow>
												<mrow>
													<mn>2</mn>
													<mo>&#x2062;</mo>
													<msub><mi>L</mi><mi>tight</mi></msub>
													<mo>&#x2062;</mo>
													<msub><mi>L</mi><mi>lowerleg</mi></msub>
												</mrow>
												</mfrac>
											<mo>)</mo>
										</math>
									</div>
									With the same idea, the angle of the hip can be calculated:
									<div style="text-align: center;">
										<math xmlns="http://www.w3.org/1998/Math/MathML">
											<mrow>
												<mi>B</mi>
												<mo>(</mo><mi>t</mi><mo>)</mo>
												<mo>=</mo>
												<munder>
												<mo>∑</mo>
												<mrow>
													<mi>i</mi><mo>=</mo><mn>0</mn>
												</mrow>
												</munder>
												<msup><mn></mn><mn>4</mn></msup>
												<mo> </mo>
												<mrow>
												<mi>binom</mi>
												<mo>(</mo><mn>4</mn><mo>,</mo><mi>i</mi><mo>)</mo>
												<mo>&#x2062;</mo>
												<msup><mo>(</mo><mi>1</mi><mo>-</mo><mi>t</mi><mo>)</mo><mrow><mn>4</mn><mo>-</mo><mi>i</mi></mrow></msup>
												<mo>&#x2062;</mo>
												<msup><mi>t</mi><mi>i</mi></msup>
												<mo>&#x2062;</mo>
												<msub><mi>P</mi><mi>i</mi></msub>
												</mrow>
											</mrow>
										</math>
										<br>
									</div>
									<br>
									This are the formulas for the inverse kinematic of one leg. <br>
									With these formulas, the servo angles can be calculated depending on the desired foot position.
									So it is possible to define smooth trajectories for the feet during the walking gait.
									</p>
									<h4>Movement of the legs</h4>
									<p>
										With the help of the inverse kinematic, it is possible to define trajectories for a feet in x and y dimension. <br>
										There are some requirements for the trajectories during the walking gait: <br>
										<ul>	
											<li>The foot has to be lifted during the forward movement.</li>
											<li>The foot has to move smoothly.</li>
											<li>The foot has to be set down smoothly.</li>
											<li>The foot has to be accelarated smoothly.</li>
										</ul>
										These requirements can be fulfilled with a Bezier curve of fourth order which is shown below. <br>
										<br>
										<div style="text-align: center;">
											<math xmlns="http://www.w3.org/1998/Math/MathML">
												<mrow>
													<mi>B</mi>
													<mo>(</mo><mi>t</mi><mo>)</mo>
													<mo>=</mo>
													<msup><mo>(</mo><mi>1</mi><mo>-</mo><mi>t</mi><mo>)</mo><mn>4</mn></msup>
													<mo>&#x2062;</mo>
													<msub><mi>P</mi><mn>0</mn></msub>
													<mo>+</mo>
													<mn>4</mn>
													<mo>&#x2062;</mo>
													<msup><mo>(</mo><mi>1</mi><mo>-</mo><mi>t</mi><mo>)</mo><mn>3</mn></msup>
													<mo>&#x2062;</mo>
													<mi>t</mi>
													<mo>&#x2062;</mo>
													<msub><mi>P</mi><mn>1</mn></msub>
													<mo>+</mo>
													<mn>6</mn>
													<mo>&#x2062;</mo>
													<msup><mo>(</mo><mi>1</mi><mo>-</mo><mi>t</mi><mo>)</mo><mn>2</mn></msup>
													<mo>&#x2062;</mo>
													<msup><mi>t</mi><mn>2</mn></msup>
													<mo>&#x2062;</mo>
													<msub><mi>P</mi><mn>2</mn></msub>
													<mo>+</mo>
													<mn>4</mn>
													<mo>&#x2062;</mo>
													<mi>(</mi><mi>1</mi><mo>-</mo><mi>t</mi><mi>)</mi>
													<mo>&#x2062;</mo>
													<msup><mi>t</mi><mn>3</mn></msup>
													<mo>&#x2062;</mo>
													<msub><mi>P</mi><mn>3</mn></msub>
													<mo>+</mo>
													<msup><mi>t</mi><mn>4</mn></msup>
													<mo>&#x2062;</mo>
													<msub><mi>P</mi><mn>4</mn></msub>
												</mrow>
											</math>
										</div>
										<br>
										Where P0 to P4 are the control points of the Bezier curve and t is a parameter between 0 and 1. <br>
										The following curve is used for the foot trajectory during the walking gait.
										<div style="text-align: center;">
											<img class="image_in_text" src="../images/robo_dog/leg_tr.png"></img>
										</div>
										The animation below shows either the movement of one leg or all four legs during the walking gait. <br>
										As described above, the walking gait is divided into four phases. <br>
										In each phase, one leg is lifted, moved forward and set down again, while the other three legs provide stability. <br>
										<br>
										Feel free to try it out:
										<br>
										<div style="text-align: center;">
											<canvas id="ani" width="500" height="520"></canvas>
											<script src="../project_files/robo_dog/animation.js"></script>
											<div class="control">
											<!--<input type="checkbox" class="opts" value=1> 1 leg<br>
											<input type="checkbox" class="opts" value=4> 4 legs<br>-->
											<button class="butAni" onclick="animateStepsOne()">One Leg</button>
											<button class="butAni" onclick="animateStepsFour()">Four Legs</button>
											</div>
										</div>
									</p>
									<h4>Simulation of a leg</h4>
									<p>
										Before implementing the walking gait on the real leg, the movement of one leg was simulated in Python. <br>
										This made it possible to verify the moments, speeds und positions.<br>
										It allowed to optimize the walking gait before implementing it on the real robot.
										A maximum weight of 500 g was assumed for the dog which is distributed on three legs on time. 
										The MG90s servos can provide a stall torque of 0.177 Nm which was divided by three for safety reasons. 
										The folowing figure shows the results of the simulation:
										<div style="text-align: center;">
											<img class="image_in_text" src="../images/robo_dog/leg_m.png"></img>
										</div>
										This is for a step length of 5 cm which starts 1 cm before the vertical projection of the hip. <br>
										All values are in a safe range for the servos and the variations are continuous and smooth.
										Therefore, the walking gait can be implemented on the real robot. If the robot will be lighter, even bigger step lengths are possible.
									</p>
									<h3>Wiring and Parts</h3>
									<p>
										As already mentioned, the robotic dog is controlled by an ESP32 and the MG90S servos are controlled via a PCA9685 servo driver board. 
										In addition, a 7,4 V 2000 mAh 15C LiPo battery and two XL4015 are used to supply the robot dog with sufficent power. <br>
									</p>
									<h3>Programming the ESP32</h3>
									<p>
										The ESP32 was programmed with ESP-IDF in VS Code. <br>
									</p>
									<div style="height:6em"></div>
									<p>This project was a cooperation with <a href="https://nora-1125.github.io/Website/">Nora</a>. Please check her website, too.</p>
									<h3>License</h3>
									<p>
										Since the originals are licended under GPL3+, this project is also licended under GPL3+.
									</p>
								</article>

						</div>
					</div>
				</div>
			
			<!-- Footer-->
				<div id="footer-wrapper">
					<footer id="footer" class="container">
						<div class="row">
							<div class="col-3 col-6-medium col-12-small">

								<!-- Links -->
									<section class="widget links">
										<h3>Interesting links</h3>
										<ul class="style2">
											<li><a href="https://www.hsu-hh.de/">HSU</a></li>
											<li><a href="https://nora-1125.github.io/Website/">Nora</a></li>
											<li><a href="https://marcellotania.com/Production-Engineering-2025/">Production Engineering</a></li>
											<li><a href="https://openlab-hamburg.de">Open Lab</a></li>
										</ul>
									</section>

							</div>
							<div class="col-3 col-6-medium col-12-small">


							</div>
							<div class="col-3 col-6-medium col-12-small">

								
							</div>
							<div class="col-3 col-6-medium col-12-small">

								<!-- Contact -->
									<section class="widget contact">
										<h3>Contact Me</h3>
										<ul>
											<li>
												<a href="https://github.com/JD1108/" target="_blank" rel="noopener" class="icon">
  													<i id="contacts" class="fab fa-github fa-lg"></i>
												</a>
											</li>
											<li>
												<a href="https://github.com/JD1108/" target="_blank" rel="noopener" class="icon">
  													<i id="contacts" class="far fa-envelope fa-lg"></i>
												</a>
											</li>
											
										</ul>
									</section>

							</div>
						</div>
						<div class="row">
							<div class="col-12">
								<div id="copyright">
									<ul class="menu">
										<li>&copy; Untitled. All rights reserved</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
									</ul>
								</div>
							</div>
						</div>
					</footer>
				</div>

			</div> 

		<!-- Scripts -->

			<script src="../assets/js/jquery.min.js"></script>
			<script src="../assets/js/jquery.dropotron.min.js"></script>
			<script src="../assets/js/browser.min.js"></script>
			<script src="../assets/js/breakpoints.min.js"></script>
			<script src="../assets/js/util.js"></script>
			<script src="../assets/js/main.js"></script>

	</body>
</html>